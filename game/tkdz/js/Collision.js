"use strict";function CheckIntersect(e,i,t){return A1=e.x+t,B1=e.x+e.size-t,C1=e.y+t,D1=e.y+e.size-t,A2=i.x+t,B2=i.x+i.size-t,C2=i.y+t,D2=i.y+i.size-t,(A1>=A2&&A1<=B2||B1>=A2&&B1<=B2)&&(C1>=C2&&C1<=D2||D1>=C2&&D1<=D2)}function tankMapCollision(e,i){var t=0,s=0,r=0;if(e.dir==UP?(s=parseInt((e.tempY+3-i.offsetY)/i.tileSize),r=parseInt((e.tempX+3-i.offsetX)/i.tileSize)):e.dir==DOWN?(s=parseInt((e.tempY-3-i.offsetY+e.size)/i.tileSize),r=parseInt((e.tempX+3-i.offsetX)/i.tileSize)):e.dir==LEFT?(s=parseInt((e.tempY+3-i.offsetY)/i.tileSize),r=parseInt((e.tempX+3-i.offsetX)/i.tileSize)):e.dir==RIGHT&&(s=parseInt((e.tempY+3-i.offsetY)/i.tileSize),r=parseInt((e.tempX-3-i.offsetX+e.size)/i.tileSize)),s>=i.HTileCount||s<0||r>=i.wTileCount||r<0)return!0;if(e.dir==UP||e.dir==DOWN){var f=parseInt(e.tempX-map.offsetX-r*i.tileSize+e.size-3);t=f%i.tileSize==0?parseInt(f/i.tileSize):parseInt(f/i.tileSize)+1;for(var l=0;l<t&&r+l<i.wTileCount;l++){if((n=i.mapLevel[s][r+l])==WALL||n==GRID||n==WATER||n==HOME||n==ANOTHREHOME)return e.dir==UP?e.y=i.offsetY+s*i.tileSize+i.tileSize-3:e.dir==DOWN&&(e.y=i.offsetY+s*i.tileSize-e.size+3),!0}}else{var a=parseInt(e.tempY-map.offsetY-s*i.tileSize+e.size-3);t=a%i.tileSize==0?parseInt(a/i.tileSize):parseInt(a/i.tileSize)+1;for(l=0;l<t&&s+l<i.HTileCount;l++){var n;if((n=i.mapLevel[s+l][r])==WALL||n==GRID||n==WATER||n==HOME||n==ANOTHREHOME)return e.dir==LEFT?e.x=i.offsetX+r*i.tileSize+i.tileSize-3:e.dir==RIGHT&&(e.x=i.offsetX+r*i.tileSize-e.size+3),!0}}return!1}function bulletMapCollision(e,i){var t=0,s=0,r=0,f=[],l=!1;if(e.dir==UP?(s=parseInt((e.y-i.offsetY)/i.tileSize),r=parseInt((e.x-i.offsetX)/i.tileSize)):e.dir==DOWN?(s=parseInt((e.y-i.offsetY+e.size)/i.tileSize),r=parseInt((e.x-i.offsetX)/i.tileSize)):e.dir==LEFT?(s=parseInt((e.y-i.offsetY)/i.tileSize),r=parseInt((e.x-i.offsetX)/i.tileSize)):e.dir==RIGHT&&(s=parseInt((e.y-i.offsetY)/i.tileSize),r=parseInt((e.x-i.offsetX+e.size)/i.tileSize)),s>=i.HTileCount||s<0||r>=i.wTileCount||r<0)return!0;if(e.dir==UP||e.dir==DOWN){var a=parseInt(e.x-map.offsetX-r*i.tileSize+e.size);t=a%i.tileSize==0?parseInt(a/i.tileSize):parseInt(a/i.tileSize)+1;for(var n=0;n<t&&r+n<i.wTileCount;n++){if((z=i.mapLevel[s][r+n])==WALL||z==GRID||z==HOME||z==ANOTHREHOME)if(l=!0,z==WALL)f.push([s,r+n]);else if(z!=GRID){isGameOver=!0;break}}}else{var p=parseInt(e.y-map.offsetY-s*i.tileSize+e.size);t=p%i.tileSize==0?parseInt(p/i.tileSize):parseInt(p/i.tileSize)+1;for(n=0;n<t&&s+n<i.HTileCount;n++){var z;if((z=i.mapLevel[s+n][r])==WALL||z==GRID||z==HOME||z==ANOTHREHOME)if(l=!0,z==WALL)f.push([s+n,r]);else if(z!=GRID){isGameOver=!0;break}}}return map.updateMap(f,0),l}